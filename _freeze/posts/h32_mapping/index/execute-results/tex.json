{
  "hash": "2568035381cd2796b4822a8dce5b5a2f",
  "result": {
    "markdown": "---\ntitle: \"Neuronexus EEG Probe Mapping\"\nauthor: \"Ernie Pedapati\"\ndate: \"2023-07-01\"\ncategories: [vhtp, mouse, EEG, Neuronexus, probe, mapping]\nimage: \"\"\n---\n\n\n\n# Neuronexus EEG Probe Mapping\n\n\n\n\n\n\n\n\n## Overview\n\nThis protocol describes how to map the location of the Mouse EEG v2 H32 Probe with the OM Amplifier Adapter. For better or worse, like all custom probes mapping must be confirmed manually.\n\nPer Neuronexus the recordings are stored in the following format:\n\n> Radiens saves primary time-series data sets (e.g., neural recordings) in a simple, open format.  Each dataset (i.e. recording) is saved in a file set named ‘XDAT’ that consists of three files: (i) flat binary file containing the matrix of all sample values (typical in uV) across the multiple channels, (ii) flat binary file containing all timestamps, (iii) json text file containing enriched metadata.\n[link](https://www.neuronexus.com/products/software/radiens#featurestab-6/)\n\nWe can import metadata from the json file which contains infomation about the probe layout and recording:\n\n```matlab\n    % MATLAB code to extract metadata from XDAT dataset\n\n    str = fileread([xdat_filename '.xdat.json']);\n    jsonData = jsondecode(str);\n\n    % extract metadata for probe mapping\n    H32Metadata = jsonData.sapiens_base.biointerface_map;\n\n    % remove non-array fields\n    H32Metadata = rmfield(H32Metadata, 'samp_freq');\n    H32Metadata = rmfield(H32Metadata, 'sig_units');\n    \n    % save metadata as CSV\n    writetable(struct2table(H32Metadata),'NeuroNexusMouseEEGv2H32_Map.csv');\n\n```\n\nFor convenience, I have hosted the resulting CSV file on [github](https://github.com/cincibrainlab/vhtp/blob/main/chanfiles/NeuroNexusMouseEEGv2H32_Map.csv) for futher analysis.\n\n## Examining the Probe Metadata\n\nWe will evalute the metadata in R to more easily plot and wrangle the data. First, we will load the CSV file from github and view the first 5 rows of the metadata.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load CSV file from github\n\nH32Metadata <- read_csv(\"https://raw.githubusercontent.com/cincibrainlab/vhtp/main/chanfiles/NeuroNexusMouseEEGv2H32_Map.csv\", , col_types = cols())\n\n# View the first 10 rows of the metadata\ntb1 <- H32Metadata %>% head(5) %>% kable() \n```\n:::\n\n\n\n**Table 1:** Table of XDAT dataset metadata for the Mouse EEG v2 H32 Probe.\n\n\n::: {.cell-output-display}\n\\begin{tabular}{c}\n\\toprule\nx\\\\\n\\midrule\n\\textbackslash{}begin\\{tabular\\}\\{l|l|r|l|r|l|l|r|r|r|r|r|l|r|r|r|r|l|r|r|l|r|r|r|r|r|r|r|r|r|l|l|r|r\\}\n\\textbackslash{}hline\nchan\\textbackslash{}\\_name \\& chan\\textbackslash{}\\_type \\& ntv\\textbackslash{}\\_chan\\textbackslash{}\\_idx \\& ntv\\textbackslash{}\\_chan\\textbackslash{}\\_name \\& sys\\textbackslash{}\\_chan\\textbackslash{}\\_idx \\& site\\textbackslash{}\\_shape \\& port \\& absolute\\textbackslash{}\\_idx \\& scs\\textbackslash{}\\_to\\textbackslash{}\\_tcs\\textbackslash{}\\_y \\& site\\textbackslash{}\\_lim\\textbackslash{}\\_x\\textbackslash{}\\_min \\& site\\textbackslash{}\\_lim\\textbackslash{}\\_z\\textbackslash{}\\_max \\& site\\textbackslash{}\\_ctr\\textbackslash{}\\_y \\& headstage\\textbackslash{}\\_id \\& site\\textbackslash{}\\_ctr\\textbackslash{}\\_z \\& site\\textbackslash{}\\_ctr\\textbackslash{}\\_x \\& site\\textbackslash{}\\_ctr\\textbackslash{}\\_tcs\\textbackslash{}\\_x \\& site\\textbackslash{}\\_lim\\textbackslash{}\\_x\\textbackslash{}\\_max \\& probe\\textbackslash{}\\_id \\& site\\textbackslash{}\\_ctr\\textbackslash{}\\_tcs\\textbackslash{}\\_y \\& site\\textbackslash{}\\_num \\& sensor\\textbackslash{}\\_units \\& scs\\textbackslash{}\\_to\\textbackslash{}\\_tcs\\textbackslash{}\\_z \\& is\\textbackslash{}\\_audio \\& is\\textbackslash{}\\_audio\\textbackslash{}\\_left \\& is\\textbackslash{}\\_audio\\textbackslash{}\\_right \\& is\\textbackslash{}\\_selected \\& site\\textbackslash{}\\_lim\\textbackslash{}\\_y\\textbackslash{}\\_min \\& site\\textbackslash{}\\_lim\\textbackslash{}\\_y\\textbackslash{}\\_max \\& scs\\textbackslash{}\\_to\\textbackslash{}\\_tcs\\textbackslash{}\\_x \\& site\\textbackslash{}\\_lim\\textbackslash{}\\_z\\textbackslash{}\\_min \\& dsrc\\textbackslash{}\\_uid \\& sensor\\textbackslash{}\\_uid \\& site\\textbackslash{}\\_ctr\\textbackslash{}\\_tcs\\textbackslash{}\\_z \\& color\\textbackslash{}\\_grp\\textbackslash{}\\_idx\\textbackslash{}\\textbackslash{}\n\\textbackslash{}hline\npri\\textbackslash{}\\_0 \\& ai0 \\& 0 \\& port\\textbackslash{}\\_A\\textbackslash{}\\_0 \\& 0 \\& circle \\& A \\& 4 \\& 0 \\& 674.114 \\& 0 \\& 404.99961 \\& hstg\\textbackslash{}\\_\\textbackslash{}\\_passthrough\\textbackslash{}\\_32 \\& 0 \\& 699.1136 \\& 0 \\& 724.114 \\& probe\\textbackslash{}\\_\\textbackslash{}\\_eeg\\textbackslash{}\\_mouse\\textbackslash{}\\_1x30 \\& 0 \\& 1 \\& uV \\& 0 \\& 0 \\& 0 \\& 0 \\& 1 \\& 430 \\& 380 \\& 0 \\& 0 \\& SmartboxPro Signals \\& hstg\\textbackslash{}\\_\\textbackslash{}\\_passthrough\\textbackslash{}\\_32/probe\\textbackslash{}\\_\\textbackslash{}\\_eeg\\textbackslash{}\\_mouse\\textbackslash{}\\_1x30 \\& 0 \\& 2\\textbackslash{}\\textbackslash{}\n\\textbackslash{}hline\npri\\textbackslash{}\\_1 \\& ai0 \\& 1 \\& port\\textbackslash{}\\_A\\textbackslash{}\\_1 \\& 1 \\& circle \\& A \\& 5 \\& 0 \\& 674.114 \\& 0 \\& 223.99961 \\& hstg\\textbackslash{}\\_\\textbackslash{}\\_passthrough\\textbackslash{}\\_32 \\& 0 \\& 699.1136 \\& 0 \\& 724.114 \\& probe\\textbackslash{}\\_\\textbackslash{}\\_eeg\\textbackslash{}\\_mouse\\textbackslash{}\\_1x30 \\& 0 \\& 2 \\& uV \\& 0 \\& 0 \\& 0 \\& 0 \\& 1 \\& 249 \\& 199 \\& 0 \\& 0 \\& SmartboxPro Signals \\& hstg\\textbackslash{}\\_\\textbackslash{}\\_passthrough\\textbackslash{}\\_32/probe\\textbackslash{}\\_\\textbackslash{}\\_eeg\\textbackslash{}\\_mouse\\textbackslash{}\\_1x30 \\& 0 \\& 2\\textbackslash{}\\textbackslash{}\n\\textbackslash{}hline\npri\\textbackslash{}\\_2 \\& ai0 \\& 2 \\& port\\textbackslash{}\\_A\\textbackslash{}\\_2 \\& 2 \\& circle \\& A \\& 12 \\& 0 \\& 674.114 \\& 0 \\& 99.99961 \\& hstg\\textbackslash{}\\_\\textbackslash{}\\_passthrough\\textbackslash{}\\_32 \\& 0 \\& 699.1136 \\& 0 \\& 724.114 \\& probe\\textbackslash{}\\_\\textbackslash{}\\_eeg\\textbackslash{}\\_mouse\\textbackslash{}\\_1x30 \\& 0 \\& 3 \\& uV \\& 0 \\& 0 \\& 0 \\& 0 \\& 1 \\& 125 \\& 75 \\& 0 \\& 0 \\& SmartboxPro Signals \\& hstg\\textbackslash{}\\_\\textbackslash{}\\_passthrough\\textbackslash{}\\_32/probe\\textbackslash{}\\_\\textbackslash{}\\_eeg\\textbackslash{}\\_mouse\\textbackslash{}\\_1x30 \\& 0 \\& 3\\textbackslash{}\\textbackslash{}\n\\textbackslash{}hline\npri\\textbackslash{}\\_3 \\& ai0 \\& 3 \\& port\\textbackslash{}\\_A\\textbackslash{}\\_3 \\& 3 \\& circle \\& A \\& 6 \\& 0 \\& 564.114 \\& 0 \\& 412.99961 \\& hstg\\textbackslash{}\\_\\textbackslash{}\\_passthrough\\textbackslash{}\\_32 \\& 0 \\& 589.1136 \\& 0 \\& 614.114 \\& probe\\textbackslash{}\\_\\textbackslash{}\\_eeg\\textbackslash{}\\_mouse\\textbackslash{}\\_1x30 \\& 0 \\& 4 \\& uV \\& 0 \\& 0 \\& 0 \\& 0 \\& 1 \\& 438 \\& 388 \\& 0 \\& 0 \\& SmartboxPro Signals \\& hstg\\textbackslash{}\\_\\textbackslash{}\\_passthrough\\textbackslash{}\\_32/probe\\textbackslash{}\\_\\textbackslash{}\\_eeg\\textbackslash{}\\_mouse\\textbackslash{}\\_1x30 \\& 0 \\& 2\\textbackslash{}\\textbackslash{}\n\\textbackslash{}hline\npri\\textbackslash{}\\_4 \\& ai0 \\& 4 \\& port\\textbackslash{}\\_A\\textbackslash{}\\_4 \\& 4 \\& circle \\& A \\& 7 \\& 0 \\& 564.114 \\& 0 \\& 287.99961 \\& hstg\\textbackslash{}\\_\\textbackslash{}\\_passthrough\\textbackslash{}\\_32 \\& 0 \\& 589.1136 \\& 0 \\& 614.114 \\& probe\\textbackslash{}\\_\\textbackslash{}\\_eeg\\textbackslash{}\\_mouse\\textbackslash{}\\_1x30 \\& 0 \\& 5 \\& uV \\& 0 \\& 0 \\& 0 \\& 0 \\& 1 \\& 313 \\& 263 \\& 0 \\& 0 \\& SmartboxPro Signals \\& hstg\\textbackslash{}\\_\\textbackslash{}\\_passthrough\\textbackslash{}\\_32/probe\\textbackslash{}\\_\\textbackslash{}\\_eeg\\textbackslash{}\\_mouse\\textbackslash{}\\_1x30 \\& 0 \\& 2\\textbackslash{}\\textbackslash{}\n\\textbackslash{}hline\n\\textbackslash{}end\\{tabular\\}\\\\\n\\bottomrule\n\\end{tabular}\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "\\usepackage{booktabs}\n\\usepackage{longtable}\n\\usepackage{array}\n\\usepackage{multirow}\n\\usepackage{wrapfig}\n\\usepackage{float}\n\\usepackage{colortbl}\n\\usepackage{pdflscape}\n\\usepackage{tabu}\n\\usepackage{threeparttable}\n\\usepackage{threeparttablex}\n\\usepackage[normalem]{ulem}\n\\usepackage{makecell}\n\\usepackage{xcolor}\n"
      ]
    },
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}